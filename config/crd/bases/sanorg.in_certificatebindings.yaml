---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  name: certificatebindings.sanorg.in
spec:
  group: sanorg.in
  names:
    kind: CertificateBinding
    listKind: CertificateBindingList
    plural: certificatebindings
    singular: certificatebinding
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: CertificateBinding is the Schema for the certificatebindings
          API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: CertificateBindingSpec defines the desired state of CertificateBinding.
            properties:
              certificate:
                description: |-
                  Certificate defines the configuration for a cert-manager Certificate.
                  If provided, the controller will create and manage a cert-manager Certificate.
                properties:
                  commonName:
                    description: CommonName is the common name for the certificate.
                    type: string
                  dnsNames:
                    description: DNSNames is a list of DNS names to include in the
                      certificate.
                    items:
                      type: string
                    type: array
                  duration:
                    description: Duration is the lifetime of the certificate.
                    type: string
                  issuerRef:
                    description: IssuerRef is a reference to the issuer for this certificate.
                    properties:
                      group:
                        description: Group of the issuer.
                        type: string
                      kind:
                        description: Kind of the issuer (Issuer or ClusterIssuer).
                        type: string
                      name:
                        description: Name of the issuer.
                        type: string
                    required:
                    - name
                    type: object
                  renewBefore:
                    description: RenewBefore is the time before expiry to renew.
                    type: string
                  secretName:
                    description: SecretName is the name of the secret to create (defaults
                      to binding name-tls).
                    type: string
                required:
                - dnsNames
                - issuerRef
                type: object
              destinationRules:
                description: DestinationRules defines where to sync the certificate.
                items:
                  description: DestinationRule defines a destination where certificates
                    should be synced.
                  properties:
                    config:
                      description: Config contains destination-specific configuration.
                      properties:
                        certificateArn:
                          description: CertificateARN is the ARN of the ACM certificate
                            (for AWSACM type).
                          type: string
                        certificateName:
                          description: CertificateName is the name to use for the
                            certificate in the destination.
                          type: string
                        keyVaultName:
                          description: KeyVaultName is the name of the Azure Key Vault
                            (for AzureKeyVault type).
                          type: string
                        region:
                          description: Region is the AWS region (for AWSACM type).
                          type: string
                        targetNamespace:
                          description: TargetNamespace is the target namespace (for
                            Kubernetes type).
                          type: string
                        targetSecretName:
                          description: TargetSecretName is the target secret name
                            (for Kubernetes type).
                          type: string
                      type: object
                    name:
                      description: Name is a unique identifier for this destination.
                      type: string
                    type:
                      description: Type is the type of destination (AzureKeyVault,
                        AWSACM, Kubernetes).
                      type: string
                  required:
                  - config
                  - name
                  - type
                  type: object
                type: array
              sourceSecretRef:
                description: SourceSecretRef is used if you already have a secret
                  and don't want the controller to manage a Certificate.
                properties:
                  name:
                    description: Name of the secret.
                    type: string
                  namespace:
                    description: Namespace of the secret.
                    type: string
                required:
                - name
                - namespace
                type: object
              syncPolicy:
                description: SyncPolicy defines the sync policy.
                properties:
                  maxRetries:
                    description: MaxRetries is the maximum number of retries before
                      giving up.
                    format: int32
                    type: integer
                  retryInterval:
                    description: RetryInterval is the interval between retries.
                    type: string
                  runOnce:
                    description: RunOnce if true, the controller will not re-sync
                      after a successful operation until the source changes.
                    type: boolean
                type: object
            type: object
          status:
            description: CertificateBindingStatus defines the observed state of CertificateBinding.
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the CertificateBinding's state.
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              destinations:
                description: Destinations contains the status of each destination.
                items:
                  description: DestinationStatus defines the status of a destination
                    sync.
                  properties:
                    error:
                      description: Error contains any error message from the last
                        sync attempt.
                      type: string
                    lastSync:
                      description: LastSync is the timestamp of the last successful
                        sync.
                      format: date-time
                      type: string
                    name:
                      description: Name is the name of the destination.
                      type: string
                    retryCount:
                      description: RetryCount is the number of retry attempts.
                      format: int32
                      type: integer
                    state:
                      description: State is the current state of the sync.
                      type: string
                    type:
                      description: Type is the type of destination.
                      type: string
                  required:
                  - name
                  - state
                  - type
                  type: object
                type: array
              lastSyncTime:
                description: LastSyncTime is the timestamp of the last sync operation.
                format: date-time
                type: string
              observedGeneration:
                description: ObservedGeneration is the latest generation of the CertificateBinding
                  that was processed.
                format: int64
                type: integer
              ready:
                description: Ready indicates if the certificate binding is ready.
                type: boolean
              syncCount:
                description: SyncCount is the number of times the controller has synced.
                format: int64
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
